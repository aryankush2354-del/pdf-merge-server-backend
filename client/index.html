<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PDF Merge Tool</title>
</head>
<body>
  <h1>PDF Merge Tool</h1>
  <input type="file" id="files" multiple />
  <button id="mergeBtn">Merge PDFs</button>
  <a id="downloadLink" style="display:none;">Download Merged PDF</a>

  <script>
    const mergeBtn = document.getElementById("mergeBtn");
    mergeBtn.onclick = async () => {
      const files = document.getElementById("files").files;
      if (!files.length) return alert("Select PDF files first");

      const formData = new FormData();
      for (const file of files) formData.append("pdfs", file);

      const res = await fetch("http://localhost:3000/merge", {
        method: "POST",
        body: formData
      });

      if (res.status === 200) {
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        const downloadLink = document.getElementById("downloadLink");
        downloadLink.href = url;
        downloadLink.download = "merged.pdf";
        downloadLink.style.display = "block";
        downloadLink.textContent = "Download Merged PDF";
      } else {
        alert("Error merging PDFs");
      }
    };
  </script>
</body>
</html>
